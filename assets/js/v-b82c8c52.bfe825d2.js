"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[688],{4505:(n,s,a)=>{a.r(s),a.d(s,{data:()=>e});const e={key:"v-b82c8c52",path:"/environment/Nginx%E4%BD%BF%E7%94%A8.html",title:"安装",lang:"en-US",frontmatter:{},excerpt:"",headers:[],filePathRelative:"environment/Nginx使用.md",git:{updatedTime:163878076e4,contributors:[{name:"孑然一身",email:"ljqrongyao@outlook.com",commits:1}]}}},201:(n,s,a)=>{a.r(s),a.d(s,{default:()=>t});const e=(0,a(6252).uE)('<h1 id="安装" tabindex="-1"><a class="header-anchor" href="#安装" aria-hidden="true">#</a> 安装</h1><h1 id="配置" tabindex="-1"><a class="header-anchor" href="#配置" aria-hidden="true">#</a> 配置</h1><blockquote><p>Nginx的主要核心配置文件</p></blockquote><p><code>nginx.conf</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 全局块</span>\n<span class="token comment"># user nobody</span>\nworker_processes <span class="token number">1</span><span class="token punctuation">;</span>\n\n<span class="token comment"># 进程文件</span>\npid logs/nginx.pid<span class="token punctuation">;</span>\n\nevents <span class="token punctuation">{</span> <span class="token comment"># events块</span>\n\t<span class="token comment"># 单个进程最大连接数(最大连接数=连接数*进程数)</span>\n\tworker_connections <span class="token number">1024</span><span class="token punctuation">;</span> <span class="token comment"># 默认为512</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment"># 设置http服务</span>\nhttp <span class="token punctuation">{</span> <span class="token comment"># http块</span>\n\t<span class="token comment"># http全局块</span>\n\t\n\t<span class="token comment"># 文件扩展名与类型映射表 </span>\n\tinclude mime.types<span class="token punctuation">;</span>\n\t<span class="token comment"># 默认文件类型</span>\n\tdefault_type application/octet-stream<span class="token punctuation">;</span>\n\t<span class="token comment"># 上传文件大小限制</span>\n\t<span class="token comment"># client_header_buffers 10M;</span>\n\t<span class="token comment"># 开始高效文件传输模式</span>\n\tsendfile on<span class="token punctuation">;</span>\n\tkeepalive_timeout <span class="token number">65</span><span class="token punctuation">;</span>\n\t<span class="token comment"># charset utf-8; # 默认编码</span>\n\t<span class="token comment"># tcp_nopush on; # </span>\n\t\n\tserver<span class="token punctuation">{</span> <span class="token comment"># server块</span>\n\t\t<span class="token comment"># 监听端口</span>\n\t\tlisten <span class="token number">80</span><span class="token punctuation">;</span> \n\t\t<span class="token comment"># 域名可以有多个、用逗号隔开</span>\n        server_name jinqli.com, fleeting-time.com<span class="token punctuation">;</span>\n        <span class="token comment"># HTTP 自动跳转 HTTPS</span>\n        rewrite ^<span class="token punctuation">(</span>.*<span class="token punctuation">)</span> https://www.jinqli.com<span class="token punctuation">;</span> \n        <span class="token comment"># 拒绝的ip</span>\n        <span class="token comment"># deny &lt;ip_address&gt;;</span>\n        <span class="token comment"># 允许的ip</span>\n        <span class="token comment"># allow &lt;ip_address&gt;;</span>\n        \n\t\tlocation / <span class="token punctuation">{</span> <span class="token comment"># location块</span>\n\t\t\t<span class="token comment"># 项目文件路径</span>\n\t\t\troot html/MuZiLi<span class="token punctuation">;</span>\n            index index.html index.htm<span class="token punctuation">;</span>\n\t\t<span class="token punctuation">}</span>\n\t\t\n\t\tlocation /api <span class="token punctuation">{</span> <span class="token comment"># location块</span>\n\t\t\t<span class="token comment"># 代理</span>\n\t\t\tproxy_pass http://127.0.0.1:3000/api<span class="token punctuation">;</span>\n\t\t<span class="token punctuation">}</span>\n\t\t\n\t\terror_page <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span> /50x.html<span class="token punctuation">;</span>\n\t\tlocation <span class="token operator">=</span>/50x.html <span class="token punctuation">{</span> <span class="token comment"># location块</span>\n\t\t\troot html<span class="token punctuation">;</span>\n\t\t<span class="token punctuation">}</span>\n\t\t\n\t\t<span class="token comment"># location &lt;path&gt; { # location块</span>\n\t\t\t<span class="token comment"># ...</span>\n\t\t<span class="token comment"># }</span>\n\t<span class="token punctuation">}</span>\n\t\n\tserver<span class="token punctuation">{</span> <span class="token comment"># server块</span>\n\t\t<span class="token comment"># 腾讯云SSL证书配置</span>\n\t\t<span class="token comment"># SSL访问端口为443</span>\n\t\tlisten <span class="token number">443</span> ssl<span class="token punctuation">;</span>\n\t\t<span class="token comment"># 绑定证书的域名</span>\n\t\tserver_name jinqli.com<span class="token punctuation">;</span>\n\t\t<span class="token comment"># 证书文件名称</span>\n\t\tssl_certificate jinqli.com_bundle.crt<span class="token punctuation">;</span> \n\t\t<span class="token comment"># 私钥文件名称</span>\n\t\tssl_certificate_key jinqli.com.key<span class="token punctuation">;</span> \n        ssl_session_timeout 5m<span class="token punctuation">;</span>\n\t\t<span class="token comment">#请按照以下协议配置</span>\n        ssl_protocols TLSv1 TLSv1.1 TLSv1.2<span class="token punctuation">;</span> \n        <span class="token comment">#请按照以下套件配置，配置加密套件，写法遵循 openssl 标准。</span>\n        ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:<span class="token operator">!</span>aNULL:<span class="token operator">!</span>MD5:<span class="token operator">!</span>RC4:<span class="token operator">!</span>DHE<span class="token punctuation">;</span> \n        ssl_prefer_server_ciphers on<span class="token punctuation">;</span>\n\t\tlocation / <span class="token punctuation">{</span>\n\t\t\t<span class="token comment"># 项目文件路径</span>\n\t\t\troot html/MuZiLi<span class="token punctuation">;</span>\n\t\t\tindex index.html index.htm<span class="token punctuation">;</span>\n\t\t<span class="token punctuation">}</span>\n\t<span class="token punctuation">}</span>\n\t\n\t<span class="token comment"># http全局块</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment"># 全局块</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br></div></div><h1 id="bug" tabindex="-1"><a class="header-anchor" href="#bug" aria-hidden="true">#</a> <code>bug</code></h1>',6),p={},t=(0,a(3744).Z)(p,[["render",function(n,s){return e}]])},3744:(n,s)=>{s.Z=(n,s)=>{const a=n.__vccOpts||n;for(const[n,e]of s)a[n]=e;return a}}}]);